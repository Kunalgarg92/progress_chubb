package payment;

import java.io.*;
import java.util.*;

class Account {
    String name;
    String country;
    String accountNo;
    String ifscCode;
    double balance;

    public Account(String name, String country, String accountNo, String ifscCode, double balance) {
        this.name = name;
        this.country = country;
        this.accountNo = accountNo;
        this.ifscCode = ifscCode;
        this.balance = balance;
    }
}

public class balancetransfer {

    public static void main(String[] args) {
        String filePath = "C:/Users/kunal/chubb_workspace/Paymentapp/src/payment/details.txt";
        processTransfers(filePath);
    }

    public static void processTransfers(String filePath) {
        double totalHDFCPaid = 0;

        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {
            String line;

            while ((line = br.readLine()) != null) {
                String[] data = line.split(",");

                if (data.length != 11) continue;

                Account sender = new Account(
                        data[0], data[1], data[2], data[3], Double.parseDouble(data[4])
                );

                double transferAmount = Double.parseDouble(data[5]);
                String transferMode = data[6];

                Account receiver = new Account(
                        data[7], data[8], data[9], data[10], 0
                );

                if (transferAmount > 0 && sender.balance >= transferAmount) {
                    sender.balance -= transferAmount;
                    receiver.balance += transferAmount;

                    if (sender.ifscCode.startsWith("HDFC"))
                        totalHDFCPaid += transferAmount;

                    System.out.println(sender.name + " transferred " + transferAmount + " to " + receiver.name + " via " + transferMode);
                } else {
                    System.out.println("Transfer failed for " + sender.name + " â†’ " + receiver.name);
                }
            }

            System.out.println("\nTotal amount paid by HDFC Bank: " + totalHDFCPaid);

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
