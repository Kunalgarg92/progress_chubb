package payment;
import java.io.*;
import java.util.Scanner;

class balancetransfer {

    public static void main(String[] args) {
        try {
        	String filepath = "C:\\Users\\kunal\\chubb_workspace\\Paymentapp\\src\\payment\\details.txt";
            FileReadOperations obj = new FileReadOperations();
            obj.processTransfers(filepath);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public void processTransfers(String filepath) throws IOException {
        double totalHdfcPaid = 0;

        File file = new File(filepath);
        if (!file.exists()) {
            System.out.println("File not found: " + filepath);
            return;
        }

        try (Scanner sc = new Scanner(file)) {
            while (sc.hasNextLine()) {
                String line = sc.nextLine().trim();
                if (line.isEmpty()) continue;

                String[] parts = line.split(",");
                if (parts.length != 12) continue;

                String senderName = parts[0];
                String senderCountry = parts[1];
                String senderAcc = parts[2];
                String senderIfsc = parts[3];
                double senderBal = Double.parseDouble(parts[4]);
                double transferAmt = Double.parseDouble(parts[5]);
                String transCode = parts[6];
                String receiverName = parts[7];
                String receiverCountry = parts[8];
                String receiverAcc = parts[9];
                String receiverIfsc = parts[10];
                String dummy = parts[11];

                if (transferAmt > 0 && senderBal >= transferAmt) {
                    senderBal -= transferAmt;
                    if (senderIfsc.startsWith("HDFC")) {
                        totalHdfcPaid += transferAmt;
                    }
                    System.out.println("Transfer Successful: " + senderName + " -> " + receiverName + " | Amount: " + transferAmt);
                } else {
                    System.out.println("Transfer Failed: " + senderName + " -> " + receiverName + " | Insufficient Balance or Invalid Amount");
                }
            }
        }

        System.out.println("\nTotal Amount Paid by HDFC Bank: " + totalHdfcPaid);
    }
}
